<!DOCTYPE html><html lang="en" data-mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="How to Set Up an AD Domain (Video Demonstration)" /><meta name="author" content="Hieu Huynh" /><meta property="og:locale" content="en" /><meta name="description" content="Instructional guides and miscellaneous life stuff." /><meta property="og:description" content="Instructional guides and miscellaneous life stuff." /><link rel="canonical" href="https://hhuynh15.github.io//posts/active-directory-home-lab/" /><meta property="og:url" content="https://hhuynh15.github.io//posts/active-directory-home-lab/" /><meta property="og:site_name" content="What a Blog" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2023-03-21T08:24:00-07:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="How to Set Up an AD Domain (Video Demonstration)" /><meta name="twitter:site" content="@hubris_maximus" /><meta name="twitter:creator" content="@Hieu Huynh" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Hieu Huynh"},"dateModified":"2023-04-16T16:16:43-07:00","datePublished":"2023-03-21T08:24:00-07:00","description":"Instructional guides and miscellaneous life stuff.","headline":"How to Set Up an AD Domain (Video Demonstration)","mainEntityOfPage":{"@type":"WebPage","@id":"https://hhuynh15.github.io//posts/active-directory-home-lab/"},"url":"https://hhuynh15.github.io//posts/active-directory-home-lab/"}</script><title>How to Set Up an AD Domain (Video Demonstration) | What a Blog</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="What a Blog"><meta name="application-name" content="What a Blog"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src=" https://i.imgur.com/Hqf9WbC.png " alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">What a Blog</a></div><div class="site-subtitle font-italic">Instructional guides and miscellaneous life stuff.</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/hhuynh15" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/hubris_maximus" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['hieu','hieuhuynh.net'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>How to Set Up an AD Domain (Video Demonstration)</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>How to Set Up an AD Domain (Video Demonstration)</h1><div class="post-meta text-muted"><div> By <em> <a href="https://github.com/hhuynh15">Hieu Huynh</a> </em></div><div class="d-flex"><div> <span> Posted <em class="timeago" data-ts="1679412240" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2023-03-21 </em> </span> <span> Updated <em class="timeago" data-ts="1681687003" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2023-04-16 </em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="236 words"> <em>1 min</em> read</span></div></div></div><div class="post-content"><html><head><title></title><style> .video-wrapper { position: relative; padding-bottom: 56.25%; /* 16:9 aspect ratio */ } .embed-video { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }</style><body><h1></h1><div class="video-wrapper"> <iframe class="embed-video youtube lazyload" src="https://www.youtube.com/embed/Z-vYzYUzMVQ" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div><h1 id="description">Description</h1><p>For this guide I thought it would be best to demonstrate how to set up Active Directory with a video as trying to do so with a blogpost would make it very hard to follow along. Making it in a video form also allows me to more effectively explain many of the concepts that goes into creating a domain controller by explaining it visually via drawing tools. I hope you enjoy the video.</p><h1 id="timestamps">Timestamps</h1><p><a href="https://youtu.be/Z-vYzYUzMVQ?t=77">Installing Windows 2019 Server on VirtualBox 1:17 - 10:00</a></p><p><a href="https://youtu.be/Z-vYzYUzMVQ?t=610">Configuring Network Adapters 10:10 - 12:54</a></p><p><a href="https://youtu.be/Z-vYzYUzMVQ?t=778">Configuring the Domain Controller 12:58 - 24:22</a></p><p><a href="https://youtu.be/Z-vYzYUzMVQ?t=1515">Configuring Network Address Translation 25:15 - 28:48</a></p><p><a href="https://youtu.be/Z-vYzYUzMVQ?t=1860">Configuring DHCP Server 31:00 - 35:13</a></p><p><a href="https://youtu.be/Z-vYzYUzMVQ?t=2124">Creating Users w/ Powershell 35:24 - 51:29</a></p><p><a href="https://youtu.be/Z-vYzYUzMVQ?t=3112">Creating a Windows 10 Client on VirtualBox 52:38 - 59:20</a></p><h1 id="links">Links</h1><p><a href="https://www.virtualbox.org/wiki/Downloads">Oracle VirtualBox</a></p><p><a href="https://www.microsoft.com/en-us/evalcenter/download-windows-server-2019">Server 2019 ISO</a></p><p><a href="https://www.microsoft.com/en-us/software-download/windows10ISO">Windows 10 ISO</a></p><p><a href="https://www.randomlists.com/random-names?qty=1000">Random Name Generator</a></p><h1 id="script-used-in-the-video">Script Used in the Video</h1><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
</pre><td class="rouge-code"><pre><span class="nv">$PASSWORD</span> <span class="o">=</span> <span class="s2">"Password1"</span>
<span class="nv">$USER_NAMES</span> <span class="o">=</span> Get-Content .<span class="se">\n</span>ames.txt

<span class="nv">$ENCRYPTED_PASSWORD</span> <span class="o">=</span> ConvertTo-SecureString <span class="nv">$PASSWORD</span> <span class="nt">-AsPlainText</span> <span class="nt">-Force</span>
New-ADOrganizationalUnit <span class="nt">-Name</span> _USERS <span class="nt">-ProtectedFromAccidentalDeletion</span> <span class="nv">$false</span>

foreach <span class="o">(</span><span class="nv">$n</span> <span class="k">in</span> <span class="nv">$USER_NAMES</span><span class="o">)</span> <span class="o">{</span>
    <span class="nv">$first</span> <span class="o">=</span> <span class="nv">$n</span>.Split<span class="o">(</span><span class="s2">" "</span><span class="o">)[</span>0].ToLower<span class="o">()</span>
    <span class="nv">$last</span> <span class="o">=</span> <span class="nv">$n</span>.Split<span class="o">(</span><span class="s2">" "</span><span class="o">)[</span>1].ToLower<span class="o">()</span>
    <span class="nv">$username</span> <span class="o">=</span> <span class="s2">"</span><span class="si">$(</span><span class="nv">$first</span>.Substring<span class="o">(</span>0,1<span class="o">)</span><span class="si">)$(</span><span class="nv">$last</span><span class="si">)</span><span class="s2">"</span>.ToLower<span class="o">()</span>
    Write-Host <span class="s2">"Creating User: </span><span class="si">$(</span><span class="nv">$username</span><span class="si">)</span><span class="s2">"</span> <span class="nt">-BackgroundColor</span> Black <span class="nt">-ForegroundColor</span> Cyan

    New-AdUser <span class="nt">-AccountPassword</span> <span class="nv">$ENCRYPTED_PASSWORD</span> <span class="sb">`</span>
               <span class="nt">-GivenName</span> <span class="nv">$first</span> <span class="sb">`</span>
               <span class="nt">-Surname</span> <span class="nv">$last</span> <span class="sb">`</span>
               <span class="nt">-DisplayName</span> <span class="nv">$username</span> <span class="sb">`</span>
               <span class="nt">-Name</span> <span class="nv">$username</span> <span class="sb">`</span>
               <span class="nt">-EmployeeID</span> <span class="nv">$username</span> <span class="sb">`</span>
               <span class="nt">-PasswordNeverExpires</span> <span class="nv">$true</span> <span class="sb">`</span>
               <span class="nt">-Path</span> <span class="s2">"ou=_USERS,</span><span class="k">$((</span><span class="o">[</span>ADSI]<span class="sb">`</span><span class="s2">""</span><span class="o">)</span>.distinguishedName<span class="o">)</span><span class="s2">" </span><span class="sb">`</span>
               <span class="nt">-Enabled</span> <span class="nv">$true</span>
<span class="o">}</span>
</pre></table></code></div></div></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/guides/'>Guides</a>, <a href='/categories/homelab/'>Homelab</a>, <a href='/categories/active-directory/'>Active Directory</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/instructional/" class="post-tag no-text-decoration" >Instructional</a> <a href="/tags/guides/" class="post-tag no-text-decoration" >Guides</a> <a href="/tags/networking/" class="post-tag no-text-decoration" >Networking</a> <a href="/tags/active-directory/" class="post-tag no-text-decoration" >Active Directory</a> <a href="/tags/dhcp/" class="post-tag no-text-decoration" >DHCP</a> <a href="/tags/dns/" class="post-tag no-text-decoration" >DNS</a> <a href="/tags/ras/" class="post-tag no-text-decoration" >RAS</a> <a href="/tags/nat/" class="post-tag no-text-decoration" >NAT</a> <a href="/tags/domain/" class="post-tag no-text-decoration" >Domain</a> <a href="/tags/powershell/" class="post-tag no-text-decoration" >Powershell</a> <a href="/tags/windows-10/" class="post-tag no-text-decoration" >Windows 10</a> <a href="/tags/windows-server/" class="post-tag no-text-decoration" >Windows Server</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=How to Set Up an AD Domain (Video Demonstration) - What a Blog&amp;url=https://hhuynh15.github.io//posts/active-directory-home-lab/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=How to Set Up an AD Domain (Video Demonstration) - What a Blog&amp;u=https://hhuynh15.github.io//posts/active-directory-home-lab/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https://hhuynh15.github.io//posts/active-directory-home-lab/&amp;text=How to Set Up an AD Domain (Video Demonstration) - What a Blog" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/bash-scripting/">How I Only Spend 30 Minutes a Month to Run My Rust Server</a><li><a href="/posts/lets-build-a-home-server-rack/">Let's Build a Home Server Rack</a><li><a href="/posts/wifi-brute-forcing-with-hashcat/">How to Perform a Brute Force Attack on a WiFi Network</a><li><a href="/posts/tech-layoffs-and-you/">Tech Layoffs and You</a><li><a href="/posts/rust-server-in-docker-on-aws/">How to Run a Rust Server in Docker on AWS</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/guides/">Guides</a> <a class="post-tag" href="/tags/instructional/">Instructional</a> <a class="post-tag" href="/tags/linux/">Linux</a> <a class="post-tag" href="/tags/networking/">Networking</a> <a class="post-tag" href="/tags/automation/">Automation</a> <a class="post-tag" href="/tags/blogging/">Blogging</a> <a class="post-tag" href="/tags/career/">Career</a> <a class="post-tag" href="/tags/news/">News</a> <a class="post-tag" href="/tags/rust/">Rust</a> <a class="post-tag" href="/tags/tech/">Tech</a></div></div></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/lets-build-a-home-server-rack/"><div class="card-body"> <em class="timeago small" data-ts="1667647260" > 2022-11-05 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Let's Build a Home Server Rack</h3><div class="text-muted small"><p> Introduction Building a home server rack is a great way to expand your knowledge in network and server administration, and gain hands-on experience with enterprise-level technologies. By using Li...</p></div></div></a></div><div class="card"> <a href="/posts/wifi-brute-forcing-with-hashcat/"><div class="card-body"> <em class="timeago small" data-ts="1657020060" > 2022-07-05 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>How to Perform a Brute Force Attack on a WiFi Network</h3><div class="text-muted small"><p> Introduction This guide will teach you some basic penetration testing skills for wireless networks. I hope to also demonstrate how having a weak password can leave even the most secure networks v...</p></div></div></a></div><div class="card"> <a href="/posts/rust-server-in-docker-on-aws/"><div class="card-body"> <em class="timeago small" data-ts="1647889800" > 2022-03-21 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>How to Run a Rust Server in Docker on AWS</h3><div class="text-muted small"><p> Introduction This guide will teach you how to run your own Rust server on the cloud. This guide assumes you already have some Linux knowledge and that you will be able to manage your server on yo...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/love-chatgpt/" class="btn btn-outline-primary" prompt="Older"><p>How I Learned to Stop Worrying and Love ChatGPT</p></a> <a href="/posts/bash-scripting/" class="btn btn-outline-primary" prompt="Newer"><p>How I Only Spend 30 Minutes a Month to Run My Rust Server</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2024 <a href="https://twitter.com/hubris_maximus">Hieu Huynh</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/guides/">Guides</a> <a class="post-tag" href="/tags/instructional/">Instructional</a> <a class="post-tag" href="/tags/linux/">Linux</a> <a class="post-tag" href="/tags/networking/">Networking</a> <a class="post-tag" href="/tags/automation/">Automation</a> <a class="post-tag" href="/tags/blogging/">Blogging</a> <a class="post-tag" href="/tags/career/">Career</a> <a class="post-tag" href="/tags/news/">News</a> <a class="post-tag" href="/tags/rust/">Rust</a> <a class="post-tag" href="/tags/tech/">Tech</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script>
